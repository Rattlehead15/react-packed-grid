{"version":3,"sources":["../../src/index.tsx","App.tsx","index.tsx"],"names":["usePackedGridLayout","useState","numBoxes","setNumBoxes","layout","setLayout","containerRef","useRef","updateLayout","useCallback","el","width","height","largestSquare","containerWidth","containerHeight","useEffect","listener","window","PackedGrid","children","className","boxClassName","updateLayoutRef","React","ref","style","display","flexFlow","placeContent","maxWidth","maxHeight","GridItemPlaceholder","backgroundColor","border","App","focusRef","focus","type","min","value","onChange","e","Number","parseInt","target","onClick","current","Array","from","length","map","_","idx","key","ReactDOM","render","document","getElementById"],"mappings":"2MA0BA,SAASA,I,MAKyBC,mBAAS,GAAlCC,OAAUC,O,EACWF,qBAArBG,OAAQC,OACTC,EAAeC,mBACfC,EAAeC,uBACnB,YAIE,GAHA,MAAIC,IACFJ,aAEEJ,KAAgBI,EAApB,QAA0C,CACxC,IAAMK,EAAQL,kCAAd,MACMM,EAASN,kCAAf,OACAD,GAxBmB,EAwBSM,EAxBpC,EAwB2CC,EAxB3C,EAwBQP,EAnBCQ,wBAAcC,EAAgBC,EAArC,KALF,IAA2B,EAA3B,MA2BI,CAXF,IAsBA,OATAC,qBAAU,WACRR,IACA,IAAMS,EAAW,kBAAMT,KAEvB,OADAU,oCACO,WACLA,0CAED,CAPHF,IASO,CAACZ,EAAQD,EAAhB,G,SAGcgB,K,IACdC,aACAC,cACAC,iBACAC,oB,EAE4CvB,IAArCI,OAAQD,OAAaK,OAiB5B,OAfAQ,qBAAU,WACRb,EAAYqB,mBAAZrB,MACC,CAFHa,IAIAA,qBAAU,WAIR,OAHA,IACEO,UAA0B,kBAAMf,MAE3B,WACL,IACEe,qBAGH,CAACf,EATJQ,IAYE,yBACEK,UAAWA,EACXI,IAAKjB,EACLkB,MAAO,CACLC,QADK,OAELC,SAFK,WAGLC,aAAc,WAGf,oBAA6B,mBAC5B,yBACER,UAAWC,EACXI,MACEtB,EACI,CACEuB,QADF,QAEEhB,MAFF,OAGEC,OAHF,OAIEkB,SAAa1B,EAAL,MAJV,KAKE2B,UAAc3B,EAAL,aAEX,CACEuB,QAAS,SAbS,OCxFpC,SAASK,EAAT,GAA2E,IAA5CZ,EAA2C,EAA3CA,SAC7B,OACE,yBACEM,MAAO,CACLO,gBAAiB,aACjBN,QAAS,OACTE,aAAc,SACdlB,MAAO,OACPC,OAAQ,OACRsB,OAAQ,oBAGTd,GAKP,IAuCee,EAvCH,WACV,IAAMZ,EAAkBhB,mBAClB6B,EAAW3B,uBAAY,SAACC,GAC5BA,EAAG2B,UACF,IAJa,EAKgBpC,mBAAS,GALzB,mBAKTC,EALS,KAKCC,EALD,KAOhB,OACE,oCACE,yBAAKkB,UAAU,YACb,uCAEE,2BACEI,IAAKW,EACLE,KAAK,SACLC,IAAI,IACJC,MAAOtC,EACPuC,SAAU,SAACC,GAAD,OAAOvC,EAAYwC,OAAOC,SAASF,EAAEG,OAAOL,MAAO,SAGjE,4BACEM,QAAS,WACHvB,EAAgBwB,SAClBxB,EAAgBwB,YAHtB,wBAUF,kBAAC5B,EAAD,CAAYE,UAAU,aAAaE,gBAAiBA,GACjDyB,MAAMC,KAAK,CAAEC,OAAQhD,IAAYiD,KAAI,SAACC,EAAGC,GAAJ,OACpC,kBAACrB,EAAD,CAAqBsB,IAAKD,GAA1B,OAAoCA,EAAM,SC/CpDE,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.106d5ea6.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react'\nimport { largestSquare } from 'rect-scaler'\n\ninterface Props {\n  children: React.ReactNode\n  className?: string\n  boxClassName?: string\n  updateLayoutRef?: React.MutableRefObject<(() => void) | undefined>\n}\n\ntype Layout = {\n  rows: number\n  cols: number\n  width: number\n  height: number\n  area: number\n}\n\nfunction recalculateLayout(\n  containerWidth: number,\n  containerHeight: number,\n  numSquares: number\n) {\n  return largestSquare(containerWidth, containerHeight, numSquares)\n}\n\nfunction usePackedGridLayout(): [\n  Layout | undefined,\n  (numBoxes: number) => void,\n  (el?: HTMLDivElement | null) => void\n] {\n  const [numBoxes, setNumBoxes] = useState(0)\n  const [layout, setLayout] = useState<Layout>()\n  const containerRef = useRef<HTMLDivElement>()\n  const updateLayout = useCallback(\n    (el?: HTMLDivElement | null) => {\n      if (el != null) {\n        containerRef.current = el\n      }\n      if (numBoxes > 0 && containerRef.current) {\n        const width = containerRef.current.getBoundingClientRect().width\n        const height = containerRef.current.getBoundingClientRect().height\n        setLayout(recalculateLayout(width, height, numBoxes))\n      }\n    },\n    [numBoxes]\n  )\n  useEffect(() => {\n    updateLayout()\n    const listener = () => updateLayout()\n    window.addEventListener('resize', listener)\n    return () => {\n      window.removeEventListener('resize', listener)\n    }\n  }, [updateLayout])\n\n  return [layout, setNumBoxes, updateLayout]\n}\n\nexport function PackedGrid({\n  children,\n  className,\n  boxClassName,\n  updateLayoutRef\n}: Props) {\n  const [layout, setNumBoxes, updateLayout] = usePackedGridLayout()\n\n  useEffect(() => {\n    setNumBoxes(React.Children.count(children))\n  }, [children])\n\n  useEffect(() => {\n    if (updateLayoutRef) {\n      updateLayoutRef.current = () => updateLayout()\n    }\n    return () => {\n      if (updateLayoutRef) {\n        updateLayoutRef.current = undefined\n      }\n    }\n  }, [updateLayout, updateLayoutRef])\n\n  return (\n    <div\n      className={className}\n      ref={updateLayout}\n      style={{\n        display: 'flex',\n        flexFlow: 'row wrap',\n        placeContent: 'center'\n      }}\n    >\n      {React.Children.map(children, (child) => (\n        <div\n          className={boxClassName}\n          style={\n            layout\n              ? {\n                  display: 'block',\n                  width: '100%',\n                  height: '100%',\n                  maxWidth: `${layout.width}px`,\n                  maxHeight: `${layout.height}px`\n                }\n              : {\n                  display: 'none'\n                }\n          }\n        >\n          {child}\n        </div>\n      ))}\n    </div>\n  )\n}\n","import React, { useState, useCallback, useRef } from 'react'\n\nimport { PackedGrid } from 'react-packed-grid'\n\nfunction GridItemPlaceholder({ children }: { children: React.ReactNode }) {\n  return (\n    <div\n      style={{\n        backgroundColor: 'whitesmoke',\n        display: 'grid',\n        placeContent: 'center',\n        width: '100%',\n        height: '100%',\n        border: '2px solid black'\n      }}\n    >\n      {children}\n    </div>\n  )\n}\n\nconst App = () => {\n  const updateLayoutRef = useRef<() => void>()\n  const focusRef = useCallback((el) => {\n    el.focus()\n  }, [])\n  const [numBoxes, setNumBoxes] = useState(1)\n\n  return (\n    <>\n      <div className='controls'>\n        <label>\n          Boxes\n          <input\n            ref={focusRef}\n            type='number'\n            min='1'\n            value={numBoxes}\n            onChange={(e) => setNumBoxes(Number.parseInt(e.target.value, 10))}\n          />\n        </label>\n        <button\n          onClick={() => {\n            if (updateLayoutRef.current) {\n              updateLayoutRef.current()\n            }\n          }}\n        >\n          Force Layout Update\n        </button>\n      </div>\n      <PackedGrid className='fullscreen' updateLayoutRef={updateLayoutRef}>\n        {Array.from({ length: numBoxes }).map((_, idx) => (\n          <GridItemPlaceholder key={idx}>Box {idx + 1}</GridItemPlaceholder>\n        ))}\n      </PackedGrid>\n    </>\n  )\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}